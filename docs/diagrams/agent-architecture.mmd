flowchart TD
U["사용자"] --> API["백엔드 API /api/langgraph-agent/chat"]
API --> AGENT["LangGraph 에이전트"]

subgraph "LangGraph 에이전트"
START --> CLASSIFY["입력 분류"]
CLASSIFY -->|"일반"| GENERAL["일반 대화"]
CLASSIFY -->|"툴"| TOOL["툴 실행"]
GENERAL --> RESP["응답 생성"]
TOOL --> RESP
RESP --> END
end

subgraph "의도 분류"
QUICK["경량 분류(토큰/청크)"] --> LLM["LLM 분류(의도, 경로)"]
end

LLM --> CLASSIFY

TOOL -.-> TM["툴 관리자"]

subgraph "툴 관리자"
NAV["navigate"] --> NAVPAY["페이지 액션: {action:navigate, target}"]
DOM["dom_action"] --> DOMPAY["페이지 액션: {action:dom, ...}"]
SJ["search_jobs"] --> SJTXT["텍스트 응답"]
AR["analyze_resume"] --> ARTXT["텍스트 응답"]
CP["create_portfolio"] --> CPTXT["텍스트 응답"]
SA["submit_application"] --> SATXT["텍스트 응답"]
GUI["get_user_info"] --> GUITXT["텍스트 응답"]
GIS["get_interview_schedule"] --> GISTXT["텍스트 응답"]
end

RESP --> OUT["어시스턴트 JSON/텍스트"]
OUT --> FE["프론트 LangGraphChatbot"]
FE -->|"page_action.navigate"| NAVACT["라우터 이동(navigate(target))"]
FE -->|"page_action.dom"| DOMACT["DOM 액션 실행"]


